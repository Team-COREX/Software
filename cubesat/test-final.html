<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test R√°pido - Dashboard CubeSat</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 2px solid #ddd; border-radius: 8px; }
        .success { border-color: #4CAF50; background-color: #f1f8e9; }
        .error { border-color: #f44336; background-color: #ffebee; }
        canvas { border: 1px solid #ccc; }
        #test3d { border: 1px solid #333; background-color: #000; }
    </style>
</head>
<body>
    <h1>üß™ Test R√°pido del Dashboard</h1>
    
    <div class="test-section" id="chartSection">
        <h2>üî∏ Test de Gr√°ficos (Chart.js)</h2>
        <canvas id="testChart" width="400" height="200"></canvas>
        <p id="chartStatus">Cargando...</p>
    </div>
    
    <div class="test-section" id="threeSection">
        <h2>üî∏ Test de 3D (Three.js + OrbitControls)</h2>
        <div id="test3d" style="width: 400px; height: 200px;"></div>
        <p id="threeStatus">Cargando...</p>
        <p><small>Si ves un cubo verde girando, ¬°Three.js funciona!</small></p>
    </div>

    <!-- Librer√≠as locales -->
    <script src="libs/chart/chart.min.js"></script>
    <script src="libs/three/three.min.js"></script>
    <script src="libs/three/OrbitControls.js"></script>

    <script>
        // Test Chart.js
        function testChart() {
            try {
                if (typeof Chart === 'undefined') {
                    throw new Error('Chart.js no disponible');
                }

                const ctx = document.getElementById('testChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Punto 1', 'Punto 2', 'Punto 3', 'Punto 4', 'Punto 5'],
                        datasets: [{
                            label: 'Datos de Prueba',
                            data: [12, 19, 3, 5, 2],
                            borderColor: 'rgb(75, 192, 192)',
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            tension: 0.1
                        }]
                    },
                    options: {
                        responsive: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Gr√°fico de Prueba - ¬°Chart.js Funciona! ‚úÖ'
                            }
                        }
                    }
                });
                
                document.getElementById('chartStatus').innerHTML = '‚úÖ Chart.js funciona correctamente!';
                document.getElementById('chartSection').classList.add('success');
                
            } catch (error) {
                document.getElementById('chartStatus').innerHTML = '‚ùå Error: ' + error.message;
                document.getElementById('chartSection').classList.add('error');
            }
        }

        // Test Three.js y OrbitControls
        function test3D() {
            try {
                if (typeof THREE === 'undefined') {
                    throw new Error('Three.js no disponible');
                }

                // Crear escena
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, 400/200, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ antialias: true });
                
                renderer.setSize(400, 200);
                renderer.setClearColor(0x111111);
                document.getElementById('test3d').appendChild(renderer.domElement);

                // Crear un cubo
                const geometry = new THREE.BoxGeometry(1, 1, 1);
                const material = new THREE.MeshBasicMaterial({ 
                    color: 0x00ff00,
                    wireframe: false
                });
                const cube = new THREE.Mesh(geometry, material);
                scene.add(cube);

                // Agregar luz
                const light = new THREE.PointLight(0xffffff, 1, 100);
                light.position.set(5, 5, 5);
                scene.add(light);

                camera.position.z = 3;

                // Test OrbitControls
                let controls;
                try {
                    controls = new THREE.OrbitControls(camera, renderer.domElement);
                    controls.enableDamping = true;
                    controls.dampingFactor = 0.1;
                    
                    document.getElementById('threeStatus').innerHTML = '‚úÖ Three.js + OrbitControls funcionan! Puedes orbitar con el mouse.';
                    document.getElementById('threeSection').classList.add('success');
                } catch (controlsError) {
                    document.getElementById('threeStatus').innerHTML = '‚ö†Ô∏è Three.js funciona, pero OrbitControls tiene problemas: ' + controlsError.message;
                }

                // Animaci√≥n
                function animate() {
                    requestAnimationFrame(animate);
                    
                    // Rotar el cubo
                    cube.rotation.x += 0.01;
                    cube.rotation.y += 0.01;
                    
                    // Actualizar controles si existen
                    if (controls) {
                        controls.update();
                    }
                    
                    renderer.render(scene, camera);
                }
                
                animate();
                
            } catch (error) {
                document.getElementById('threeStatus').innerHTML = '‚ùå Error: ' + error.message;
                document.getElementById('threeSection').classList.add('error');
            }
        }

        // Ejecutar tests
        window.addEventListener('load', function() {
            console.log('üß™ Iniciando tests...');
            
            // Test Chart.js
            testChart();
            
            // Test Three.js con un peque√±o delay
            setTimeout(test3D, 100);
        });
    </script>
</body>
</html>
